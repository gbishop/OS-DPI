{"version":3,"file":"service-worker.js","sources":["../service-worker.js"],"sourcesContent":["var GHPATH = \"/OS-DPI\";\nvar APP_PREFIX = \"osdpi_\";\nvar VERSION = APP_VERSION;\nvar URLS = [\n  `${GHPATH}/`,\n  `${GHPATH}/index.html`,\n  `${GHPATH}/index.css`,\n  `${GHPATH}/index.js`,\n  `${GHPATH}/xlsx.js`,\n];\n\nvar CACHE_NAME = APP_PREFIX + VERSION;\nself.addEventListener(\"fetch\", function (/** @type {FetchEvent} */ e) {\n  // console.log(\"Fetch request : \" + e.request.url);\n  const url = new URL(e.request.url);\n  if (URLS.includes(url.pathname)) {\n    e.respondWith(\n      caches.match(e.request).then(function (request) {\n        if (request) {\n          // console.log(\"Responding with cache : \" + e.request.url);\n          return request;\n        } else {\n          // console.log(\"File is not cached, fetching : \" + e.request.url);\n          return fetch(e.request);\n        }\n      })\n    );\n  }\n});\n\nself.addEventListener(\"install\", function (/** @type {ExtendableEvent} */ e) {\n  e.waitUntil(\n    caches.open(CACHE_NAME).then(function (cache) {\n      // console.log(\"Installing cache : \" + CACHE_NAME);\n      return cache.addAll(URLS);\n    })\n  );\n});\n\nself.addEventListener(\"activate\", function (/** @type {ExtendableEvent} */ e) {\n  e.waitUntil(\n    caches.keys().then(function (keyList) {\n      var cacheWhitelist = keyList.filter(function (key) {\n        return key.indexOf(APP_PREFIX);\n      });\n      cacheWhitelist.push(CACHE_NAME);\n      return Promise.all(\n        keyList.map(function (key, i) {\n          if (cacheWhitelist.indexOf(key) === -1) {\n            // console.log(\"Deleting cache : \" + keyList[i]);\n            return caches.delete(keyList[i]);\n          }\n        })\n      );\n    })\n  );\n});\n\nself.addEventListener(\"message\", (/** @type {MessageEvent} */ event) => {\n  if (event.data === \"SKIP_WAITING\") {\n    // I'm missing something in my config to cause the following error\n    // @ts-ignore\n    self.skipWaiting();\n  }\n});\n"],"names":[],"mappings":"AAAA,IAAI,MAAM,GAAG,SAAS,CAAC;AACvB,IAAI,UAAU,GAAG,QAAQ,CAAC;AAC1B,IAAI,OAAO,GAAG,qBAAW,CAAC;AAC1B,IAAI,IAAI,GAAG;AACX,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC;AACd,EAAE,CAAC,EAAE,MAAM,CAAC,WAAW,CAAC;AACxB,EAAE,CAAC,EAAE,MAAM,CAAC,UAAU,CAAC;AACvB,EAAE,CAAC,EAAE,MAAM,CAAC,SAAS,CAAC;AACtB,EAAE,CAAC,EAAE,MAAM,CAAC,QAAQ,CAAC;AACrB,CAAC,CAAC;AACF;AACA,IAAI,UAAU,GAAG,UAAU,GAAG,OAAO,CAAC;AACtC,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,oCAAoC,CAAC,EAAE;AACtE;AACA,EAAE,MAAM,GAAG,GAAG,IAAI,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;AACrC,EAAE,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE;AACnC,IAAI,CAAC,CAAC,WAAW;AACjB,MAAM,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,UAAU,OAAO,EAAE;AACtD,QAAQ,IAAI,OAAO,EAAE;AACrB;AACA,UAAU,OAAO,OAAO,CAAC;AACzB,SAAS,MAAM;AACf;AACA,UAAU,OAAO,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;AAClC,SAAS;AACT,OAAO,CAAC;AACR,KAAK,CAAC;AACN,GAAG;AACH,CAAC,CAAC,CAAC;AACH;AACA,IAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,yCAAyC,CAAC,EAAE;AAC7E,EAAE,CAAC,CAAC,SAAS;AACb,IAAI,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,UAAU,KAAK,EAAE;AAClD;AACA,MAAM,OAAO,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AAChC,KAAK,CAAC;AACN,GAAG,CAAC;AACJ,CAAC,CAAC,CAAC;AACH;AACA,IAAI,CAAC,gBAAgB,CAAC,UAAU,EAAE,yCAAyC,CAAC,EAAE;AAC9E,EAAE,CAAC,CAAC,SAAS;AACb,IAAI,MAAM,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,UAAU,OAAO,EAAE;AAC1C,MAAM,IAAI,cAAc,GAAG,OAAO,CAAC,MAAM,CAAC,UAAU,GAAG,EAAE;AACzD,QAAQ,OAAO,GAAG,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;AACvC,OAAO,CAAC,CAAC;AACT,MAAM,cAAc,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;AACtC,MAAM,OAAO,OAAO,CAAC,GAAG;AACxB,QAAQ,OAAO,CAAC,GAAG,CAAC,UAAU,GAAG,EAAE,CAAC,EAAE;AACtC,UAAU,IAAI,cAAc,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE;AAClD;AACA,YAAY,OAAO,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;AAC7C,WAAW;AACX,SAAS,CAAC;AACV,OAAO,CAAC;AACR,KAAK,CAAC;AACN,GAAG,CAAC;AACJ,CAAC,CAAC,CAAC;AACH;AACA,IAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,6BAA6B,KAAK,KAAK;AACxE,EAAE,IAAI,KAAK,CAAC,IAAI,KAAK,cAAc,EAAE;AACrC;AACA;AACA,IAAI,IAAI,CAAC,WAAW,EAAE,CAAC;AACvB,GAAG;AACH,CAAC,CAAC"}