{"version":3,"file":"service-worker.js","sources":["../service-worker.js"],"sourcesContent":["var GHPATH = \"/OS-DPI\";\nvar APP_PREFIX = \"osdpi_\";\nvar VERSION = APP_VERSION;\nvar URLS = [\n  `${GHPATH}/`,\n  `${GHPATH}/index.html`,\n  `${GHPATH}/index.css`,\n  `${GHPATH}/index.js`,\n  `${GHPATH}/xlsx.js`,\n  `${GHPATH}/favicon.ico`,\n  `${GHPATH}/icon.png`,\n  `${GHPATH}/tracky-mouse/lib/clmtrackr.js`,\n  `${GHPATH}/tracky-mouse/lib/stats.js`,\n  `${GHPATH}/tracky-mouse/lib/tf.js`,\n  `${GHPATH}/tracky-mouse/facemesh.worker.js`,\n  `${GHPATH}/tracky-mouse/lib/facemesh/facemesh.js`,\n  `${GHPATH}/tracky-mouse/lib/facemesh/facemesh/model.json`,\n  `${GHPATH}/tracky-mouse/lib/facemesh/facemesh/group1-shard1of1.bin`,\n  `${GHPATH}/tracky-mouse/lib/facemesh/blazeface/model.json`,\n  `${GHPATH}/tracky-mouse/lib/facemesh/blazeface/group1-shard1of1.bin`,\n];\n\nvar CACHE_NAME = APP_PREFIX + VERSION;\nself.addEventListener(\"fetch\", function (/** @type {FetchEvent} */ e) {\n  const url = new URL(e.request.url);\n  if (URLS.includes(url.pathname)) {\n    e.respondWith(\n      caches.match(e.request).then(function (request) {\n        if (request) {\n          return request;\n        } else {\n          return fetch(e.request);\n        }\n      }),\n    );\n  }\n});\n\nself.addEventListener(\"install\", function (/** @type {ExtendableEvent} */ e) {\n  e.waitUntil(\n    caches.open(CACHE_NAME).then(function (cache) {\n      return cache.addAll(URLS);\n    }),\n  );\n});\n\nself.addEventListener(\"activate\", function (/** @type {ExtendableEvent} */ e) {\n  e.waitUntil(\n    caches.keys().then(function (keyList) {\n      var cacheWhitelist = keyList.filter(function (key) {\n        return key.indexOf(APP_PREFIX);\n      });\n      cacheWhitelist.push(CACHE_NAME);\n      return Promise.all(\n        keyList.map(function (key, i) {\n          if (cacheWhitelist.indexOf(key) === -1) {\n            return caches.delete(keyList[i]);\n          }\n        }),\n      );\n    }),\n  );\n});\nself.addEventListener(\"message\", (/** @type {MessageEvent} */ event) => {\n  if (event.data === \"SKIP_WAITING\") {\n    /** @type {ServiceWorkerGlobalScope} */ (\n      /** @type {unknown} */ (self)\n    ).skipWaiting();\n  }\n});\n"],"names":[],"mappings":"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"}